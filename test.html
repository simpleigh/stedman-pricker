<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <title>Stedman Pricker Test Page</title>
    <style type="text/css">
      #sixends {
        font-family: "Courier New", "Courier", "monospace";
        font-size: 12pt;
        float: left;
      }

      .oddCall {
        cursor: hand;
        background-color: #F0F0F8;
      }

      .evenCall {
        cursor: hand;
        background-color: #E2E2F0;
      }
    </style>
    <script type="text/javascript" src="build/stedman-pricker.js"></script>
  </head>
  <body>
    <div id="sixends"></div>
    <div id="calling"></div>
    <div>
      <label for="courseLength">Course length:</label>
      <input type="text" id="courseLength" size="2" maxLength="2" />
      <button onclick="setLength()">Set</button>
    </div>
    <div>
      <label for="callReset">Current calling:</label>
      <button id="callReset" onclick="resetCalls()">Reset</button>
    </div>
    <script type="text/javascript">
        var row = Pricker.rowFromString('231', Pricker.Stage.Cinques),
            sixes = 22,
            course = new Pricker.Course(row);

        function reDraw() {
            'use strict';

            var sixesRenderer = new Pricker.MbdCourseRenderer(),
                touchRenderer = new Pricker.CompositionCourseRenderer();

            document.getElementById('sixends').innerHTML =
                '<u>'
                + Pricker.stringFromRow(row)
                + '</u>'
                + '<br />'
                + sixesRenderer.print(course)
                + '<br />';

            document.getElementById('calling').innerHTML =
                '<u>'
                + Pricker.stringFromRow(course.getPreviousCourseEnd())
                + '</u>'
                + '<br />'
                + touchRenderer.print(course);

            document.getElementById('courseLength').value = sixes;
        }

        function c(six) {
            'use strict';
            course.toggleCall(six);
            reDraw();
        }

        function setLength() {
            'use strict';

            sixes = parseInt(document.getElementById('courseLength').value);

            if (sixes < 2) {
                sixes = row.length * 2;
            }
            if (sixes > 60) {
                sixes = 60;
            }

            course.setLength(sixes);
            reDraw();
        }

        function resetCalls() {
            course = new Pricker.Course(row);
            course.setLength(sixes);
            reDraw();
        }

        reDraw();
    </script>
  </body>
</html>
