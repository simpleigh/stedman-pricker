/**
 * Free Touch Pricker
 * @author Leigh Simpson <code@simpleigh.com>
 * @license GPL-3.0
 * @copyright Copyright 2015-18 Leigh Simpson. All rights reserved.
 */

/**
 * Renders a course, e.g.:
 * 480735692E1  s2 3  (4 sixes)
 * 2314567890E  p
 * @param {string}   end        line ending
 * @param {boolean}  courseEnd  whether to print the course end
 * @param {enum}     Call       enum for calls
 */

{{
	var calls = [ ];
	context.end = context.end || '';
	if (context.courseEnd === undefined) {
		context.courseEnd = true;
	}
}}

{{? context.courseEnd }}
	{{= context.stringFromRow(context.object.getLast()) }}
	 /* single space */
	 /* single space */
{{?}}

{{~ context.object.blocks :six }}
	{{? six.call }}
		{{ calls.push(
			((six.call === context.Call.Single) ? 's' : '')
				+ six.index
		); }}
	{{?}}
{{~}}

{{? calls.length }}
	{{= calls.join(' ') }}
{{??}}
	p
{{?}}

{{
	var method = context.object.method;
	var initialRow = context.object.initialRow;
}}

{{? context.object.length !== method.getCourseLength(initialRow) }}
	 /* single space */
	 /* single space */
	({{= context.object.length }} sixes)
{{?}}

{{= context.end }}
