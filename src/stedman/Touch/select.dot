/**
 * Free Touch Pricker
 * @author Leigh Simpson <code@simpleigh.com>
 * @license GPL-3.0
 * @copyright Copyright 2015-19 Leigh Simpson. All rights reserved.
 */

/**
 * Renders a touch as HTML for use within a <select> element
 * @param {BlockDirectory}  falseness       directory to lookup falseness
 * @param {number}          selectedIndex   index of selected course
 * @param {number}          touchRows       count of rows in the touch
 */

{{
	context.touchRows = context.touchRows || Infinity;
	context.touchRows -= context.object.start.estimateRows();
}}

<div>
	{{= context.stringFromRow(context.object.start.getLast()) }}
</div>

{{~ context.object.blocks :course }}
	<div
		 class="
			noselect
			{{? context.selectedIndex === course.index }}
				 /* single space */
				selected
			{{?}}
			{{? context.falseness && context.falseness.contains(course) }}
				 /* single space */
				false
			{{?}}
			{{? context.touchRows <= 0 }}
				 /* single space */
				unreached
			{{?}}
		"
		 onclick="pricker.onSelectCourse({{= course.index }})"
	>
		{{= course.print('text') }}
	</div>
	{{ context.touchRows -= course.estimateRows(); }}
{{~}}
